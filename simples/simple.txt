Chapter 6 Python Overview and Basic Syntax: Python File Handling Digital Skills and Python Programming Pr. Mehdia AJANA Email: mehdia.ajana@uit.ac.ma Opening Files • File handling is an important part of any application. • Python has several functions for creating, reading, updating, and deleting files. • Files can be of different types like text (.txt), binary (e.g. images), CSV, etc. • The open() function is the key function for working with files in Python. It takes two parameters; filename, and mode. Python File Handling 2 PYTHON First steps Pr. Mehdia AJANA Opening Files There are four main different modes for opening a file: • "r" - Read - Default value. Opens a file for reading, error if the file does not exist • "a" - Append - Opens a file for appending, creates the file if it does not exist • "w" - Write - Opens a file for writing, creates the file if it does not exist • "x" - Create - Creates the specified file, returns an error if the file exists You can also specify if the file should be handled as binary or text mode • "t" - Text - Default value. Text mode • "b" - Binary - Binary mode (e.g. images) These characters are added to the main mode. For example: "wb" means writing in binary mode. Python File Handling 3 PYTHON First steps Pr. Mehdia AJANA Opening Files There exist other modes: • Read and Write mode ('r+'): Opens a file for both reading and writing. An error occurs if the file does not exist. Example: file = open("file.txt", "r+") • Write and Read mode ('w+'): Opens a file for both writing and reading. If the file exists, it is truncated, and if it does not exist, a new file is created. Example: file = open("file.txt", "w+") • Append and Read mode ('a+'): Opens a file for appending and reading. If the file does not exist, it creates a new file. Example: file = open("file.txt", "a+") Python File Handling 4 PYTHON First steps Pr. Mehdia AJANA Opening Files Syntax: To open a file for reading it is enough to specify the name of the file: file = open("example.txt") The code above is the same as: file = open("example.txt", "rt") Because "r" for read, and "t" for text are the default values, you do not need to specify them. Make sure the file exists, otherwise you will get an error: FileNotFoundError Python File Handling 5 PYTHON First steps Pr. Mehdia AJANA Reading Files Assume we have the following file (example.txt), located in the same folder as Python: Hello World! Welcome to example.txt Python is awesome! Reading the entire file: The open() function returns a file object, which has a read() method for reading the content of the file: file = open("example.txt", "r") print(file.read()) #read() returns a string Python File Handling 6 PYTHON First steps Pr. Mehdia AJANA Hello World! Welcome to example.txt Python is awesome! Reading Files If the file is located in a different location, you will have to specify the file path: file = open("D:\\myfiles\\example.txt", "r") print(file.read()) Read only Parts of the File: By default the read() method returns the whole text, but you can also specify how many characters you want to return: Example: Return the 5 first characters of the file: f = open("example.txt", "r") print(f.read(5)) #read only 5 characters Python File Handling 7 PYTHON First steps Pr. Mehdia AJANA Hello Reading Files Reading Single Lines: You can return one line at a time by using the readline() method: f = open("example.txt", "r") print(f.readline()) #returns one line as a 'str' By calling readline() two times, you can read the two first lines: f = open("example.txt", "r") print(f.readline()) print(f.readline()) Python File Handling 8 PYTHON First steps Pr. Mehdia AJANA Hello World! Welcome to example.txt Hello World! Welcome to example.txt Python is awesome! Reading Files Reading All Lines: By looping through the lines of the file object, you can read the whole file, line by line: Example: f = open("example.txt", "r") for line in f: print(line) # returns a line as <class 'str'> Python File Handling 9 PYTHON First steps Pr. Mehdia AJANA Hello World! Welcome to example.txt Python is awesome! Reading Files Reading All Lines: You can also use the readlines() method to read all lines and return them as a list: Example: f = open("example.txt", "r") lines = f.readlines() print(lines) You can work with this list in your program by using it in a loop for example: for line in lines: # Do something with each line Python File Handling 10 PYTHON First steps Pr. Mehdia AJANA ['Hello World! Welcome to example.txt\n', 'Python is awesome!'] Closing Files - It is a good practice to always close the file when you are done with it. - Also in some cases, changes made to a file may not show until you close the file. - Python close() function closes the file and frees the memory space acquired by that file. - It is used at the time when the file is no longer needed or if it is to be opened in a different file mode. Example: Close the file when you are done with it: f = open("example.txt", "r") print(f.readline()) f.close() Python File Handling 11 PYTHON First steps Pr. Mehdia AJANA Writing to Files Write to an Existing File: To write to an existing file, you must add a parameter to the open() function: "a" - Append - will append to the end of the file "w" - Write - will overwrite any existing content Example 1: Open the file "example.txt" and append content to the file: f = open("example.txt" , "a") f.write("Now the file has more content!") f.close() #open and read the file after appending: f = open("example.txt", "r") print(f.read()) Python File Handling PYTHON First steps Hello World! Welcome to example.txt Python is awesome!Now the file has more content! Writing to Files Write to an Existing File: Example 2: Open the file "example.txt" and overwrite the entire content: f = open("example.txt", "w") f.write("I have overwritten the content of this file!") f.close() #open and read the file after the overwriting: f = open("example.txt", "r") print(f.read()) Python File Handling 13 PYTHON First steps Pr. Mehdia AJANA I have overwritten the content of this file! Writing to Files Writing Multiple Lines to an Existing File using writelines(): takes a list of strings. Each string represents a line to be added to the file. # Open the file in write mode to overwrite existing content f = open("example2.txt", "w") # Writing multiple lines at once lines = ["First line.\n", "Second line.\n", "Third line.\n"] f.writelines(lines) f.close() # Open and read the file after writing the lines f = open("example2.txt", "r") print(f.read()) f.close() Python File Handling 14 PYTHON First steps Pr. Mehdia AJANA First line. Second line. Third line. Creating Files Create a new File To create a new file in Python, use the open() method, with one of the following parameters: • "x" - Create - will create a file, returns an error if the file already exists • "a" - Append - will create a file if the specified file does not exist • "w" - Write - will create a file if the specified file does not exist Example1: Create a file called "myfile.txt": f = open("myfile.txt", "x") Result: a new empty file is created! Example 2: Create a new file if it does not exist: f = open("myfile.txt", "w") f = open("myfile.txt", "a") Python File Handling 15 PYTHON First steps Pr. Mehdia AJANA Deleting Files Delete a File To delete a file, you must import the os module, and use its remove() function: Example: Remove the file "example.txt": import os os.remove("example.txt") Check if File exist: To avoid getting an error, you can check if the file exists before you try to delete it: import os if os.path.exists("example.txt"): os.remove("example.txt") print("File deleted successfully.") else: print("The file does not exist") Python File Handling 16 PYTHON First steps Pr. Mehdia AJANA Deleting Files Delete a Folder To delete an entire folder, use the os.rmdir() method: Example: Remove the folder "myfolder": import os os.rmdir("myfolder") Note: You can only remove empty folders. You can check more examples of Reading and Writing to text files in Python and other methods available for the file object in python: https://www.geeksforgeeks.org/reading-writing- text-files-python/ https://www.geeksforgeeks.org/file-objects- python/ Python File Handling 17 PYTHON First steps Pr. Mehdia AJANA Handling File Exceptions It’s important to handle potential errors when handling files in python (e.g. file not found, permissions issue, etc.) using try-except. Example: try: file = open('example.txt', 'r') content = file.read() print(content) except FileNotFoundError: print("The file does not exist.") except PermissionError: print("You don't have permission to access this file.") finally: file.close() Python File Handling 18 PYTHON First steps Pr. Mehdia AJANA Using The with Statement for File Handling -The with statement simplifies file handling by automatically closing the file after the block of code is executed. -Prevents issues related to forgetting to close files. -Requires also the use of exception handling. Example: with open('example.txt', 'r') as file: content = file.read() print(content) # No need to call file.close() Python File Handling 19 PYTHON First steps Pr. Mehdia AJANA Complete Example: import os # 1. Creating and Writing to a File try: with open("example.txt", 'w') as file: file.write("Hello, World!\n") file.write("This is a file handling example.\n") print("File created and written successfully.") except Exception as e: print(f"Error writing to file: {e}") Python File Handling 20 PYTHON First steps Pr. Mehdia AJANA File created and written successfully. Complete Example: # 2. Reading the File try: with open("example.txt", 'r') as file: content = file.read() print(content) except FileNotFoundError: print("The file does not exist.") except Exception as e: print(f"Error reading the file: {e}") Python File Handling 21 PYTHON First steps Pr. Mehdia AJANA Hello, World! This is a file handling example. Complete Example: try: # 3. Appending to the File with open("example.txt", 'a') as file: file.write("Appending a new line to the file.\n") # 4. Reading the Updated File with open("example.txt", 'r') as file: updated_content = file.read() print(updated_content) except Exception as e: print(f"Error appending to the file: {e}") Python File Handling 22 PYTHON First steps Pr. Mehdia AJANA Hello, World! This is a file handling example. Appending a new line to the file. Complete Example: # 5. Deleting the File try: if os.path.exists("example.txt"): os.remove("example.txt") print("File deleted successfully.") else: print("The file does not exist.") except Exception as e: print(f"Error deleting the file: {e}") Python File Handling 23 PYTHON First steps Pr. Mehdia AJANA File deleted successfully. CSV File Processing: What is CSV? • CSV (Comma-Separated Values) is a simple file format used to store tabular data. • Each line in the file represents a row in a table, and each field is separated by a comma (default delimiter). • CSV is commonly used for data exchange between applications. • In addition to working with plain text files, Python provides built-in support for processing CSV files. • Python provides the csv module for reading and writing CSV files. Importing CSV Module: import csv Python File Handling 24 PYTHON First steps Pr. Mehdia AJANA Reading CSV Files: Using csv.reader(): The csv.reader() function reads CSV files and returns each row as a list. Basic Syntax: with open('file.csv', 'r') as file: reader = csv.reader(file) for row in reader: print(row) # Each row is a list Explanation: • open('file.csv', 'r'): Opens file in read mode. • for row in reader: Iterates over rows, printing each one. Python File Handling 25 PYTHON First steps Pr. Mehdia AJANA Reading CSV Files: Using csv.reader(): Content of file.csv: Python File Handling 26 PYTHON First steps Pr. Mehdia AJANA ['Name', 'Age', 'Country'] ['Ali', '25', 'USA'] [‘Ahmed', '30', 'Canada'] [‘Iyad', '35', 'UK'] Skipping Headers when reading CSV Files: Using csv.reader(): If you need to skip the header row when reading a CSV file, you can use next(reader). Example: with open('file.csv', 'r') as file: reader = csv.reader(file) next(reader) # retrieve the 1st row: header and skip it for the rest of the loop for row in reader: print(row) Python File Handling 27 PYTHON First steps Pr. Mehdia AJANA ['Ali', '25', 'USA'] ['Ahmed', '30', 'Canada'] ['Iyad', '35', 'UK'] Reading CSV as Dictionary: Using csv.DictReader: The DictReader function reads CSV files where each row is returned as a dictionary with keys from the header row. Example: with open('file.csv', 'r') as file: reader = csv.DictReader(file) for row in reader: print(row) print(row['Name'], row['Country']) Access fields by column names, making the code more readable. Python File Handling 28 PYTHON First steps Pr. Mehdia AJANA {'Name': 'Ali', 'Age': '25', 'Country': 'USA'} Ali USA {'Name': 'Ahmed', 'Age': '30', 'Country': 'Canada'} Ahmed Canada {'Name': 'Iyad', 'Age': '35', 'Country': 'UK'} Iyad UK Writing CSV Files: Using csv.writer: The csv.writer function writes lists of data into a CSV file. Example: with open('file.csv', 'w', newline='') as file: writer = csv.writer(file) writer.writerow(['Name', 'Age', 'Country']) writer.writerow(['Rania', 28, 'Australia']) writer.writerow(['Chaimae', 22, 'France']) • writerow: Writes a single row to the CSV file. • newline='': Prevents extra blank lines between rows. Python File Handling 29 PYTHON First steps Pr. Mehdia AJANA Name,Age,Country Rania,28,Australia Chaimae,22,France Writing CSV Files with Multiple Rows: Writing Multiple Rows at Once: Use writerows to write a list of lists (rows). Example: data = [['Name', 'Age', 'Country'], ['Ali', 25, 'USA'], [‘Ahmed', 30, 'UK']] with open('file.csv', 'w', newline='') as file: writer = csv.writer(file) writer.writerows(data) • writerows(data): Writes all rows from the list data. Python File Handling 30 PYTHON First steps Pr. Mehdia AJANA Name,Age,Country Ali,25,USA Ahmed,30,UK Writing CSV Files with Dictionary Data: Using csv.DictWriter: The DictWriter function allows writing dictionaries as rows to a CSV file: data = [{'Name': 'Ali', 'Age': 25,'Country': 'USA'}, {'Name': ‘Ahmed', 'Age': 30, 'Country': 'UK'}] with open('file.csv', 'w', newline='') as file: writer = csv.DictWriter(file, fieldnames=['Name', 'Age', 'Country']) writer.writeheader() # Write header row based on fieldnames writer.writerows(data) # Write each dictionary as a row Python File Handling 31 PYTHON First steps Pr. Mehdia AJANA Name,Age,Country Ali,25,USA Ahmed,30,UK Exercise: 1. Which of the following Python file modes allows both reading and writing? a) "r" b) "w" c) "r+" d) "a+" Python File Handling 32 PYTHON First steps Pr. Mehdia AJANA Exercise: 1. Which of the following Python file modes allows both reading and writing? a) "r" b) "w" c) "r+" d) "a+" Python File Handling 33 PYTHON First steps Pr. Mehdia AJANA Exercise: 2. What happens if you try to open a file in "w" mode when the file already exists? a) The file is opened for reading. b) The file is overwritten with new content. c) The file is appended with new content. d) An error is raised. Python File Handling 34 PYTHON First steps Pr. Mehdia AJANA Exercise: 2. What happens if you try to open a file in "w" mode when the file already exists? a) The file is opened for reading. b) The file is overwritten with new content. c) The file is appended with new content. d) An error is raised. Python File Handling 35 PYTHON First steps Pr. Mehdia AJANA Exercise: 3. What is the default behavior of the open() function when used without a mode argument? a) Opens the file for writing. b) Opens the file for reading. c) Opens the file for both reading and writing. d) Opens the file for appending. Python File Handling 36 PYTHON First steps Pr. Mehdia AJANA Exercise: 3. What is the default behavior of the open() function when used without a mode argument? a) Opens the file for writing. b) Opens the file for reading. c) Opens the file for both reading and writing. d) Opens the file for appending. Python File Handling 37 PYTHON First steps Pr. Mehdia AJANA Exercise: 4. Which of the following code snippets reads all lines of a file into a list? a) lines = file.read() b) lines = file.readlines() c) lines = file.readline() d) lines = file.readall()Python File Handling 38 PYTHON First steps Pr. Mehdia AJANA Exercise: 4. Which of the following code snippets reads all lines of a file into a list? a) lines = file.read() b) lines = file.readlines() c) lines = file.readline() d) lines = file.readall()Python File Handling 39 PYTHON First steps Pr. Mehdia AJANA Exercise: 5. In which mode will opening a file result in an error if the file does not exist? a) "r" b) "w" c) "a" d) "w+" Python File Handling 40 PYTHON First steps Pr. Mehdia AJANA Exercise: 5. In which mode will opening a file result in an error if the file does not exist? a) "r" b) "w" c) "a" d) "w+" Python File Handling 41 PYTHON First steps Pr. Mehdia AJANA Exercise: 5. What will happen if you try to write to a file opened in "r" mode? a) The file will be opened for writing, but you cannot read from it. b) An error will occur because "r" mode is for reading only. c) The file will be truncated. d) The write operation will be successful, and the content will be appended. Python File Handling 42 PYTHON First steps Pr. Mehdia AJANA Exercise: 5. What will happen if you try to write to a file opened in "r" mode? a) The file will be opened for writing, but you cannot read from it. b) An error will occur because "r" mode is for reading only. c) The file will be truncated. d) The write operation will be successful, and the content will be appended. Python File Handling 43 PYTHON First steps Pr. Mehdia AJANA Exercise: 6. Write a Python program that reads from a file named “input.txt” and writes to another file named “output.txt” Python File Handling 44 PYTHON First steps Pr. Mehdia AJANA Solution: Python File Handling 45 PYTHON First steps Pr. Mehdia AJANA with open("input.txt", "r") as file_in: with open("output.txt", "w") as file_out: for line in file_in: file_out.write(line) 
